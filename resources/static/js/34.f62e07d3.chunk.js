(this["webpackJsonpThriftShop-admin-app"]=this["webpackJsonpThriftShop-admin-app"]||[]).push([[34],{424:function(e,a,t){"use strict";t.d(a,"b",(function(){return r})),t.d(a,"i",(function(){return s})),t.d(a,"a",(function(){return i})),t.d(a,"h",(function(){return o})),t.d(a,"c",(function(){return c})),t.d(a,"d",(function(){return l})),t.d(a,"g",(function(){return m})),t.d(a,"e",(function(){return d})),t.d(a,"f",(function(){return u}));var n=t(423),r=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=n.d().email("Invalid email address!").min(a,"Email addresses must be 10 characters or more!").max(t,"Email addresses must be 255 characters or less!");return e&&(r=r.required("A valid email is required!")),r},s=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=n.d().min(a,"Value must be "+a+" characters or more!").max(t,"Value must be "+t+" characters or less!");return e&&(r=r.required("A value is required!")),r},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Please select a value!";return n.b().shape({value:n.d().required(e),text:n.d().required(e)})},o=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=n.d();return e&&(a=a.required("Please select a value!")),a},c=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=n.a().typeError("A valid number is required!");return e&&(a=a.required("A valid number is required!")),a},l=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=/^[0-9]\d*(((,\d{3}){1})*(\.\d{0,2})?)$/,t=n.d().matches(a,"A valid amount is required!");return e&&(t=t.required("A valid amount is required!")),t},m=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,t=n.d().matches(a,"Phone number is not valid");return e&&(t=t.required("A valid phone number is required!")),t},d=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,s=n.d().min(t,"Passwords must be 6 characters or more!").max(r,"Passwords must be 50 characters or less!");return e&&(s=s.matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,}$/,"Passwords must contain at least 6 characters consisting of at least one uppercase, one lowercase, one number and one special case character")),a&&(s=s.required("A valid password is required")),s},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"password",a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=n.d().oneOf([n.c(e),null],"Passwords must match");return a&&(t=t.required("Please confirm your password!")),t}},441:function(e,a,t){"use strict";var n=t(1),r=t(6),s=t(0),i=t(3),o=(t(5),t(7)),c=s.forwardRef((function(e,a){var t=e.animation,o=void 0===t?"pulse":t,c=e.classes,l=e.className,m=e.component,d=void 0===m?"span":m,u=e.height,p=e.variant,h=void 0===p?"text":p,b=e.width,v=Object(r.a)(e,["animation","classes","className","component","height","variant","width"]);return s.createElement(d,Object(n.a)({ref:a,className:Object(i.a)(c.root,c[h],l,!1!==o&&c[o])},v,{style:Object(n.a)({width:b,height:u},v.style)}))}));a.a=Object(o.a)((function(e){return{root:{display:"block",backgroundColor:e.palette.action.hover,height:"1.2em"},text:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 60%",transform:"scale(1, 0.60)",borderRadius:e.shape.borderRadius,"&:empty:before":{content:'"\\00a0"'}},rect:{},circle:{borderRadius:"50%"},pulse:{animation:"$pulse 1.5s ease-in-out 0.5s infinite"},"@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.4},"100%":{opacity:1}},wave:{position:"relative",overflow:"hidden","&::after":{animation:"$wave 1.6s linear 0.5s infinite",background:"linear-gradient(90deg, transparent, ".concat(e.palette.action.hover,", transparent)"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}},"@keyframes wave":{"0%":{transform:"translateX(-100%)"},"60%":{transform:"translateX(100%)"},"100%":{transform:"translateX(100%)"}}}}),{name:"MuiSkeleton"})(c)},481:function(e,a,t){"use strict";var n=t(13),r=t(33),s=t(177),i=t(0),o=t.n(i),c=t(420),l=t(507),m=t(252),d=t(416),u=t(9),p=Object(u.a)(o.a.createElement(o.a.Fragment,null,o.a.createElement("g",{fill:"none"},o.a.createElement("path",{d:"M0 0h24v24H0V0z"}),o.a.createElement("path",{d:"M0 0h24v24H0V0z",opacity:".87"})),o.a.createElement("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})),"LockOutlined"),h=Object(u.a)(o.a.createElement("path",{d:"M12 4C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"VisibilityRounded"),b=Object(u.a)(o.a.createElement("path",{d:"M12 6.5c2.76 0 5 2.24 5 5 0 .51-.1 1-.24 1.46l3.06 3.06c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l2.17 2.17c.47-.14.96-.24 1.47-.24zM2.71 3.16c-.39.39-.39 1.02 0 1.41l1.97 1.97C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.97-.3 4.31-.82l2.72 2.72c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L4.13 3.16c-.39-.39-1.03-.39-1.42 0zM12 16.5c-2.76 0-5-2.24-5-5 0-.77.18-1.5.49-2.14l1.57 1.57c-.03.18-.06.37-.06.57 0 1.66 1.34 3 3 3 .2 0 .38-.03.57-.07L14.14 16c-.65.32-1.37.5-2.14.5zm2.97-5.33c-.15-1.4-1.25-2.49-2.64-2.64l2.64 2.64z"}),"VisibilityOffRounded"),v=t(506);a.a=function(e){var a=e.label,t=Object(s.a)(e,["label"]),u=Object(c.d)(t),f=Object(r.a)(u,2),g=f[0],w=f[1],E=Object(i.useState)(g.value),j=Object(r.a)(E,2),O=j[0],y=j[1],N=Object(i.useState)({password:"",showPassword:!1}),x=Object(r.a)(N,2),k=x[0],q=x[1],P=function(){q(Object(n.a)(Object(n.a)({},k),{},{showPassword:!k.showPassword}))},_=function(e){e.preventDefault()},z=Object(v.a)((function(e){g.onChange&&g.onChange(e)}),200);Object(i.useEffect)((function(){""===g.value&&y("")}),[g.value]);var A=Object(i.useCallback)((function(e){e.persist();var a=e.currentTarget.value;y(a),z.callback(e)}),[z]),C={};return C=t.icon?{startAdornment:o.a.createElement(l.a,{position:"start"},o.a.createElement(p,null)),endAdornment:o.a.createElement(l.a,{position:"end"},o.a.createElement(m.a,{"aria-label":"Toggle password visibility",onClick:P,onMouseDown:_},k.showPassword?o.a.createElement(h,null):o.a.createElement(b,null)))}:{endAdornment:o.a.createElement(l.a,{position:"end"},o.a.createElement(m.a,{"aria-label":"Toggle password visibility",onClick:P,onMouseDown:_},k.showPassword?o.a.createElement(h,null):o.a.createElement(b,null)))},o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,Object.assign({fullWidth:!0,variant:"outlined",label:a,value:O,onChange:A,onBlur:g.onBlur},t,{type:k.showPassword?"text":"password",InputProps:C})),w.touched&&w.error?o.a.createElement("div",{className:"oak-input-error"},w.error):null)}},693:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return T}));var n=t(161),r=t.n(n),s=t(178),i=t(33),o=t(0),c=t.n(o),l=t(321),m=t(415),d=t(174),u=t(247),p=t(246),h=t(3),b=t(11),v=t(196),f=t(44),g=t(14),w=t(128),E=t(43),j=t(423),O=t(424),y=t(180),N=t(420),x=t(96),k=t(197),q=t(481),P=t(130),_=t(125),z=t(441),A=function(){return c.a.createElement("div",{className:"mb-spacing-6-x2"},c.a.createElement("div",{className:"p-3 d-flex align-items-center justify-content-center flex-column"},c.a.createElement(z.a,{variant:"circle",animation:"wave",width:100,height:100,className:"mb20"}),c.a.createElement(z.a,{variant:"rect",animation:"wave",height:20,width:"90%",className:"mb10"}),c.a.createElement(z.a,{variant:"rect",animation:"wave",height:20,width:"90%",className:"mb30"}),c.a.createElement(z.a,{variant:"rect",animation:"wave",height:50,width:"90%",className:"mb10"}),c.a.createElement(z.a,{variant:"rect",animation:"wave",height:50,width:"90%",className:"mb30"}),c.a.createElement(z.a,{variant:"rect",animation:"wave",width:"40%",height:40,className:"mb10"})))},C=t(24),S=t(81),M=t(131),V=Object(p.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},small:{width:e.spacing(9),height:e.spacing(9)},large:{width:e.spacing(10),height:e.spacing(10)},illustrationHeight:{height:300}}})),R={code:500,open:!0,message:"Reset password failed due to incomplete profile data from the server. Please try again!",title:"",type:"error",messages:[]};function T(e){var a=e.match,t=e.history,n="",p="";a.params.token&&a.params.code?(n=a.params.token,p=a.params.code):(Object(f.a)("Invalid token provided or your reset link has expired"),t.push("/login"));var z=Object(g.c)(),T=Object(o.useState)(!1),$=Object(i.a)(T,2),H=$[0],L=$[1],F=Object(o.useState)(!0),B=Object(i.a)(F,2),D=B[0],I=B[1],X=V(),U=Object(o.useState)({token:"",name:"",photo_thumbnail_url:"",email:""}),J=Object(i.a)(U,2),W=J[0],Z=J[1],Y=S.a.getApolloClient(p,z);Object(o.useEffect)((function(){Y.query({query:w.a,variables:{token:n}}).then((function(e){I(!1),e.data&&("success"===(e=e.data).response.status?(Z({token:e.response.token,name:e.response.name,email:e.response.email,photo_thumbnail_url:e.response.photo_thumbnail_url}),z(P.a.actions.setToken(e.response.token))):(Object(E.a)(e.response,z),t.push("/login")))})).catch((function(e){Object(E.b)(e,z),t.push("/login")}))}),[]);var G=j.b({password:O.e(),password_confirmation:O.f()}),K=function(){var e=Object(s.a)(r.a.mark((function e(a,s){var i,o,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.setSubmitting,o=S.a.getApolloClient(p,z,W.token),e.next=4,o.query({query:w.e,variables:{token:n,password:a.password,password_confirmation:a.password_confirmation}});case 4:if(c=e.sent,i(!1),L(!0),!c.data){e.next=36;break}if("success"!==(l=c.data).response.status){e.next=34;break}if(L(!1),l.response.profile){e.next=14;break}return Object(E.a)(R,z),e.abrupt("return");case 14:if(l.response.profile.theme){e.next=17;break}return Object(E.a)(R,z),e.abrupt("return");case 17:if(l.response.profile.settings){e.next=20;break}return Object(E.a)(R,z),e.abrupt("return");case 20:if(l.response.shop_code){e.next=23;break}return Object(E.a)(R,z),e.abrupt("return");case 23:z(_.a.actions.setProfile(l.response.profile)),z(M.a.actions.setShopCode(l.response.shop_code)),z(_.a.actions.setLoggedIn(!0)),z(Object(C.x)(l.response.profile.theme)),z(Object(C.x)(l.response.profile.theme)),L(!1),localStorage["user-last-seen"]=Date.now(),z(Object(f.a)("Account password reset successful")),t.push("/dashboard"),e.next=36;break;case 34:Object(E.a)(l.response,z),L(!1);case 36:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a,{title:"Reset Password"}),c.a.createElement("div",{className:"app-wrapper min-vh-100 bg-white"},c.a.createElement("div",{className:"app-main min-vh-100"},c.a.createElement("div",{className:"app-content p-0"},c.a.createElement("div",{className:"app-inner-content-layout--main"},c.a.createElement("div",{className:"flex-grow-1 w-100 d-flex align-items-center"},c.a.createElement("div",{className:"bg-composed-wrapper--content"},c.a.createElement(l.a,{container:!0,spacing:0,className:"min-vh-100"},c.a.createElement(l.a,{item:!0,lg:7,xl:6,className:"d-flex align-items-center"},c.a.createElement(l.a,{item:!0,md:10,lg:8,xl:7,className:"mx-auto"},D?c.a.createElement(A,null):c.a.createElement(N.c,{initialValues:{password:"",password_confirmation:""},onSubmit:K,validationSchema:G},(function(e){var a=e.isSubmitting;return c.a.createElement(N.b,null,c.a.createElement("div",{className:"pr20 pl20"},c.a.createElement("div",{className:"text-center"},c.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center"},""===W.photo_thumbnail_url?c.a.createElement(m.a,{className:Object(h.a)(X.small,"mb20"),variant:"circle",alt:"User",color:"primary"},W.name.charAt(0).toUpperCase()):c.a.createElement(m.a,{className:Object(h.a)(X.small,"mb20"),variant:"circle",alt:"User",src:W.photo_thumbnail_url,color:"primary"}),c.a.createElement(d.a,{variant:"h5",className:"display-4 mb-1 font-weight-bold"},W.name),c.a.createElement(d.a,{variant:"h6",className:"display-4 mb-1 font-weight-bold"},"(",W.email," )")),c.a.createElement("p",{className:"font-size-lg mb-4 text-black-50"},"Fill in the fields below to reset your account password")),c.a.createElement("div",null,c.a.createElement("div",{className:"mb-3"},c.a.createElement(q.a,{id:"password",name:"password",label:"Password",placeholder:"Password",icon:"true"})),c.a.createElement("div",{className:"mb-3"},c.a.createElement(q.a,{id:"password_confirmation",name:"password_confirmation",label:"Confirm Password",placeholder:"Confirm Password",icon:"true"})),c.a.createElement("div",{className:"d-flex justify-content-end align-items-center font-size-md"},c.a.createElement("div",null,c.a.createElement(b.b,{to:"/login",className:"text-first"},"Not You? Login"))),c.a.createElement("div",{className:"text-center py-4"},c.a.createElement(u.a,{fullWidth:!0,disabled:a||H,type:"submit",className:"btn-second font-weight-bold w-50 my-2"},a||H?c.a.createElement("div",{className:"pt5"},c.a.createElement(x.BeatLoader,{color:"var(--second)",loading:!0})):c.a.createElement(c.a.Fragment,null,"Reset password"))),c.a.createElement("div",{className:"pb-4 d-flex align-items-center justify-content-center"},c.a.createElement(k.a,{color:"dark"})))))})))),c.a.createElement(v.a,null)))))))))}}}]);