(this["webpackJsonpPlentySavings-admin-app"]=this["webpackJsonpPlentySavings-admin-app"]||[]).push([[27],{421:function(e,n,t){"use strict";var a=t(33),r=t(0),c=t.n(r),o=t(413),s=t(386),i=t(252),u=t(327),l=t(3);n.a=function(e){var n=e.type,t=e.children,m=e.title,d=e.className,_=void 0===d?"ml20 mr20":d,b=e.marginBottom,f=void 0===b||b,p=Object(r.useState)(!0),g=Object(a.a)(p,2),v=g[0],h=g[1];return c.a.createElement(s.a,{in:v,className:_},c.a.createElement(o.a,{className:Object(l.a)("alerts-alternate",{"mb-4":f}),severity:n,variant:"filled",action:c.a.createElement(i.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){h(!1)}},c.a.createElement(u.a,{fontSize:"inherit"}))},c.a.createElement("div",{className:"d-flex align-items-center align-content-start"},c.a.createElement("span",null,c.a.createElement("strong",{className:"d-block"},m),t))))}},424:function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"i",(function(){return c})),t.d(n,"a",(function(){return o})),t.d(n,"h",(function(){return s})),t.d(n,"c",(function(){return i})),t.d(n,"d",(function(){return u})),t.d(n,"g",(function(){return l})),t.d(n,"e",(function(){return m})),t.d(n,"f",(function(){return d}));var a=t(423),r=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=a.d().email("Invalid email address!").min(n,"Email addresses must be 10 characters or more!").max(t,"Email addresses must be 255 characters or less!");return e&&(r=r.required("A valid email is required!")),r},c=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=a.d().min(n,"Value must be "+n+" characters or more!").max(t,"Value must be "+t+" characters or less!");return e&&(r=r.required("A value is required!")),r},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Please select a value!";return a.b().shape({value:a.d().required(e),text:a.d().required(e)})},s=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=a.d();return e&&(n=n.required("Please select a value!")),n},i=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=a.a().typeError("A valid number is required!");return e&&(n=n.required("A valid number is required!")),n},u=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=/^[0-9]\d*(((,\d{3}){1})*(\.\d{0,2})?)$/,t=a.d().matches(n,"A valid amount is required!");return e&&(t=t.required("A valid amount is required!")),t},l=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,t=a.d().matches(n,"Phone number is not valid");return e&&(t=t.required("A valid phone number is required!")),t},m=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,c=a.d().min(t,"Passwords must be 6 characters or more!").max(r,"Passwords must be 50 characters or less!");return e&&(c=c.matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,}$/,"Passwords must contain at least 6 characters consisting of at least one uppercase, one lowercase, one number and one special case character")),n&&(c=c.required("A valid password is required")),c},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"password",n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=a.d().oneOf([a.c(e),null],"Passwords must match");return n&&(t=t.required("Please confirm your password!")),t}},426:function(e,n,t){"use strict";var a=t(33),r=t(177),c=t(0),o=t.n(c),s=t(420),i=t(507),u=t(416),l=t(519),m=t(506);n.a=function(e){var n=e.label,t=e.readOnly,d=Object(r.a)(e,["label","readOnly"]),_=Object(s.d)(d),b=Object(a.a)(_,2),f=b[0],p=b[1],g=Object(c.useState)(f.value),v=Object(a.a)(g,2),h=v[0],E=v[1],O=Object(m.a)((function(e){f.onChange&&f.onChange(e)}),200);Object(c.useEffect)((function(){""===f.value?E(""):E(f.value)}),[f.value]);var j=Object(c.useCallback)((function(e){e.persist();var n=e.currentTarget.value;E(n),O.callback(e)}),[O]),y={};return d.icon&&(y={startAdornment:o.a.createElement(i.a,{position:"start"},d.icon?d.icon:o.a.createElement(l.a,null)),readOnly:t}),o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,Object.assign({fullWidth:!0,variant:"outlined",label:n,value:h,onChange:j,onBlur:f.onBlur},d,{InputProps:y})),p.touched&&p.error?o.a.createElement("div",{className:"oak-input-error"},p.error):null)}},428:function(e,n,t){"use strict";var a=t(33),r=t(177),c=t(0),o=t.n(c),s=t(687),i=t(416),u=t(420);n.a=function(e){var n=e.label,t=e.data,l=e.limitTags,m=void 0===l?2:l,d=e.loading,_=void 0!==d&&d,b=e.onItemSelected,f=void 0===b?function(e){return e}:b,p=Object(r.a)(e,["label","data","limitTags","loading","onItemSelected"]),g=Object(u.d)(p),v=Object(a.a)(g,3),h=v[0],E=v[1],O=v[2],j=Object(c.useState)(h.value),y=Object(a.a)(j,2),A=y[0],N=y[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,Object.assign({options:t,value:h.value.text||"",inputValue:A.text||"",limitTags:m,openOnFocus:!0,autoHighlight:!0,loading:_},p,{onChange:function(e,n){var t={text:"",value:""};n?(O.setValue(n),N(n.text||t),f(n.value||t)):(O.setValue(t),N(t),f(t))},onInputChange:function(e,n){N({text:n,value:n})},getOptionLabel:function(e){return e?e.text?e.text:e:""},getOptionSelected:function(e,n){return e.value===n},style:{width:"100%"},renderInput:function(e){return o.a.createElement(i.a,Object.assign({},e,{label:n},p,{variant:"outlined"}))}})),E.touched&&E.error?o.a.createElement("div",{className:"oak-input-error"},E.error.value):null)}},431:function(e,n,t){"use strict";t.d(n,"a",(function(){return m})),t.d(n,"d",(function(){return d})),t.d(n,"e",(function(){return _})),t.d(n,"f",(function(){return b})),t.d(n,"b",(function(){return f})),t.d(n,"c",(function(){return p}));var a=t(47),r=t(21);function c(){var e=Object(a.a)(["\n  query GetSettings {\n    response: settings {\n      id\n      institution_code\n      shop_name\n      email_address\n      logo_url\n      logo_thumbnail_url\n      address\n      shop_owner_name\n      shop_owner_desc\n      phone1\n      phone2\n      dormant_phone_number\n      duplicate_transaction\n      auto_verify_customers\n      take_sms_commission\n      sms_commission_amount\n      alert_username\n      alert_password\n      alert_business_name\n      default_sender_id\n\n      send_customer_registration_email\n      send_customer_registration_sms\n      send_customer_credit_email\n      send_customer_credit_sms\n      send_customer_debit_email\n      send_customer_debit_sms\n      send_staff_registration_email\n      send_staff_registration_sms\n      send_user_registration_email\n      send_user_registration_sms\n    }\n  }\n"]);return c=function(){return e},e}function o(){var e=Object(a.a)(["\n  query GetDashboardStatistics {\n    response: dashboard_statistics {\n      active_staff_count\n      deleted_staff_count\n      active_user_count\n      suspended_user_count\n      sms_units_balance\n      active_staff_count\n      deleted_staff_count\n      active_user_count\n      suspended_user_count\n      active_customer_count\n      deleted_customer_count\n      unverified_customer_count\n      total_deposit_count\n      total_withdrawal_count\n      total_transactions_count\n      unapproved_transactions_count\n    }\n  }\n"]);return o=function(){return e},e}function s(){var e=Object(a.a)(["\n  query GetStateLGALists {\n    state_list {\n      state_id\n      state_name\n    }\n    lga_list {\n      lga_id\n      state_id\n      lga_name\n    }\n    branches {\n      data {\n        branch_code\n        branch_name\n      }\n    }\n  }\n"]);return s=function(){return e},e}function i(){var e=Object(a.a)(["\n  query GetStaffAndBranchesAndUsersLists {\n    staffs(page: 1, first: 200, orderBy: [{ column: NAME, order: ASC }]) {\n      data {\n        staff_id\n        name\n      }\n    }\n    branches {\n      data {\n        branch_code\n        branch_name\n      }\n    }\n    users(page: 1, first: 200, orderBy: [{ column: NAME, order: ASC }]) {\n      data {\n        name\n        email\n      }\n    }\n  }\n"]);return i=function(){return e},e}function u(){var e=Object(a.a)(["\n  query GetStaffAndBranchesLists {\n    staffs(page: 1, first: 200, orderBy: [{ column: NAME, order: ASC }]) {\n      data {\n        staff_id\n        name\n      }\n    }\n    branches {\n      data {\n        branch_code\n        branch_name\n      }\n    }\n  }\n"]);return u=function(){return e},e}function l(){var e=Object(a.a)(["\n  query GetBankStateLGALists {\n    staffs(page: 1, first: 200, orderBy: [{ column: NAME, order: ASC }]) {\n      data {\n        staff_id\n        name\n      }\n    }\n    state_list {\n      state_id\n      state_name\n    }\n    lga_list {\n      lga_id\n      state_id\n      lga_name\n    }\n    branches {\n      data {\n        branch_code\n        branch_name\n      }\n    }\n  }\n"]);return l=function(){return e},e}var m=Object(r.gql)(l()),d=Object(r.gql)(u()),_=Object(r.gql)(i()),b=Object(r.gql)(s()),f=Object(r.gql)(o()),p=Object(r.gql)(c())},445:function(e,n,t){"use strict";var a=t(33),r=t(177),c=t(0),o=t.n(c),s=t(420),i=t(453),u=t(425),l=t(529),m=t(507),d=t(602);n.a=function(e){var n=e.label,t=e.readOnly,c=void 0!==t&&t,_=e.disableFuture,b=void 0===_||_,f=e.disablePast,p=void 0!==f&&f,g=e.disableToolbar,v=void 0!==g&&g,h=Object(r.a)(e,["label","readOnly","disableFuture","disablePast","disableToolbar"]),E=Object(s.d)(h),O=Object(a.a)(E,3),j=O[0],y=O[1],A=O[2],N={startAdornment:o.a.createElement(m.a,{position:"start"},o.a.createElement(d.a,null)),readOnly:c};return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{utils:i.a},o.a.createElement(l.a,Object.assign({fullWidth:!0,clearable:!0,format:"dd/MM/yyyy",variant:"outlined",label:n,disableFuture:b,disablePast:p,disableToolbar:v,inputVariant:"outlined",onChange:function(e){e&&A.setValue(e)},value:j.value},h,{InputProps:N}))),y.touched&&y.error?o.a.createElement("div",{className:"oak-input-error"},y.error):null)}},450:function(e,n,t){"use strict";var a=t(33),r=t(177),c=t(0),o=t.n(c),s=t(420),i=t(507),u=t(416),l=t(519),m=t(506);n.a=function(e){var n=e.label,t=Object(r.a)(e,["label"]),d=Object(s.d)(t),_=Object(a.a)(d,2),b=_[0],f=_[1],p=Object(c.useState)(b.value),g=Object(a.a)(p,2),v=g[0],h=g[1],E=Object(m.a)((function(e){b.onChange&&b.onChange(e)}),200);Object(c.useEffect)((function(){""===b.value?h(""):h(b.value)}),[b.value]);var O=Object(c.useCallback)((function(e){e.persist();var n=e.currentTarget.value;h(n),E.callback(e)}),[E]),j={};return t.icon&&(j={startAdornment:o.a.createElement(i.a,{position:"start"},t.icon?t.icon:o.a.createElement(l.a,null))}),o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,Object.assign({fullWidth:!0,variant:"outlined",label:n,value:v,onChange:O,onBlur:b.onBlur},t,{multiline:!0,rowsMax:3,InputProps:j})),f.touched&&f.error?o.a.createElement("div",{className:"oak-input-error"},f.error):null)}},452:function(e,n,t){"use strict";t.d(n,"a",(function(){return m})),t.d(n,"b",(function(){return d})),t.d(n,"d",(function(){return _})),t.d(n,"c",(function(){return b})),t.d(n,"e",(function(){return f})),t.d(n,"f",(function(){return p}));var a=t(47),r=t(21);function c(){var e=Object(a.a)(['\n  query SearchAllCustomersFilter($page: Int!, $search: Mixed!) {\n    response: customers_filter(\n      first: 20\n      page: $page\n      orderBy: [{ column: NAME, order: ASC }]\n      where: {\n        AND: [\n          { column: VERIFIED, operator: EQ, value: "Yes" }\n          {\n            OR: [\n              { column: ACCOUNT_NUMBER, operator: LIKE, value: $search }\n              { column: NAME, operator: LIKE, value: $search }\n              { column: EMAIL, operator: LIKE, value: $search }\n              { column: PHONE_NUMBER, operator: LIKE, value: $search }\n            ]\n          }\n        ]\n      }\n    ) {\n      paginatorInfo {\n        currentPage\n        lastPage\n        total\n        perPage\n        count\n      }\n      data {\n        title\n        name\n        account_number\n        phone_number\n        photo_thumbnail_url\n        occupation\n        gender\n        daily_contribution_amount\n        main_balance\n        customer_type\n        branch {\n          branch_code\n          branch_name\n        }\n        account_officer_info {\n          name\n        }\n        page_status {\n          current_page\n          num_comm_collected\n          transaction_count\n        }\n        registration_date\n        verified\n      }\n    }\n  }\n']);return c=function(){return e},e}function o(){var e=Object(a.a)(['\n  query SearchAllCustomersFilter($page: Int!, $search: Mixed!) {\n    response: customers_filter(\n      first: 20\n      page: $page\n      orderBy: [{ column: NAME, order: ASC }]\n      where: {\n        AND: [\n          { column: VERIFIED, operator: EQ, value: "Yes" }\n          {\n            OR: [\n              { column: ACCOUNT_NUMBER, operator: LIKE, value: $search }\n              { column: NAME, operator: LIKE, value: $search }\n              { column: EMAIL, operator: LIKE, value: $search }\n              { column: PHONE_NUMBER, operator: LIKE, value: $search }\n            ]\n          }\n        ]\n      }\n    ) {\n      paginatorInfo {\n        currentPage\n        lastPage\n        total\n        perPage\n        count\n      }\n      data {\n        title\n        name\n        account_number\n        phone_number\n        photo_thumbnail_url\n        occupation\n        gender\n        daily_contribution_amount\n        main_balance\n        customer_type\n        branch {\n          branch_code\n          branch_name\n        }\n        account_officer_info {\n          name\n        }\n        registration_date\n        verified\n      }\n    }\n  }\n']);return o=function(){return e},e}function s(){var e=Object(a.a)(["\n  query GetPendingTransaction($transaction_id: String!) {\n    response: pending_transaction(transaction_id: $transaction_id) {\n      transaction_id\n      account_number\n      branch_code\n      transaction_date\n      amount\n      amount_in_words\n      received_by\n      transaction_type\n      sms_sent\n      created_by\n      sms_commission_collected\n      commission_collected\n\n      branch {\n        branch_code\n        branch_name\n      }\n\n      customer {\n        title\n        name\n        phone_number\n        daily_contribution_amount\n        main_balance\n        customer_type\n        photo_thumbnail_url\n        account_officer_info {\n          name\n        }\n      }\n      collector {\n        staff_id\n        name\n        staff_description\n      }\n    }\n  }\n"]);return s=function(){return e},e}function i(){var e=Object(a.a)(["\n  query GetTransaction($transaction_id: String!) {\n    response: transaction(transaction_id: $transaction_id) {\n      transaction_id\n      account_number\n      branch_code\n      transaction_date\n      amount\n      amount_in_words\n      received_by\n      transaction_type\n      sms_sent\n      created_by\n      sms_commission_collected\n      commission_collected\n\n      branch {\n        branch_code\n        branch_name\n      }\n\n      customer {\n        title\n        name\n        phone_number\n        daily_contribution_amount\n        main_balance\n        customer_type\n        photo_thumbnail_url\n        account_officer_info {\n          name\n        }\n      }\n      collector {\n        staff_id\n        name\n        staff_description\n      }\n    }\n  }\n"]);return i=function(){return e},e}function u(){var e=Object(a.a)(["\n  query GetAllPendingTransactionsFilter(\n    $page: Int!\n    $condition: [QueryPendingTransactionsFilterWhereWhereConditions!]\n  ) {\n    response: pending_transactions_filter(\n      page: $page\n      orderBy: [{ column: TRANSACTION_DATE, order: ASC }]\n      where: { AND: $condition }\n    ) {\n      paginatorInfo {\n        currentPage\n        lastPage\n        total\n        perPage\n        count\n      }\n      data {\n        transaction_id\n        account_number\n        branch_code\n        transaction_date\n        amount\n        amount_in_words\n        transaction_type\n        created_by\n        collector_id\n\n        branch {\n          branch_code\n          branch_name\n        }\n\n        customer {\n          name\n        }\n\n        collector {\n          staff_id\n          name\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function l(){var e=Object(a.a)(["\n  query GetAllCustomerTransactions($page: Int!, $account_number: Mixed!) {\n    response: transactions_filter(\n      page: $page\n      first: 4000\n      orderBy: [{ column: TRANSACTION_DATE, order: DESC }]\n      where: {\n        AND: [{ column: ACCOUNT_NUMBER, operator: EQ, value: $account_number }]\n      }\n    ) {\n      paginatorInfo {\n        currentPage\n        lastPage\n        total\n        perPage\n        count\n      }\n      data {\n        transaction_id\n        account_number\n        branch_code\n        transaction_date\n        amount\n        amount_in_words\n        transaction_type\n        created_by\n        collector_id\n\n        branch {\n          branch_code\n          branch_name\n        }\n\n        customer {\n          name\n        }\n\n        collector {\n          staff_id\n          name\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var m=Object(r.gql)(l()),d=Object(r.gql)(u()),_=Object(r.gql)(i()),b=Object(r.gql)(s()),f=Object(r.gql)(o()),p=Object(r.gql)(c())},492:function(e,n,t){"use strict";t.d(n,"b",(function(){return l})),t.d(n,"c",(function(){return m})),t.d(n,"d",(function(){return d})),t.d(n,"a",(function(){return _})),t.d(n,"e",(function(){return b}));var a=t(47),r=t(21);function c(){var e=Object(a.a)(["\n  mutation ReverseTransactions($transaction_ids: [Int!]!) {\n    response: reverse_transactions(transaction_ids: $transaction_ids) {\n      __typename\n      ... on Response {\n        status\n        code\n        message\n        errors\n      }\n      ... on StatusResponse {\n        status\n        code\n        message\n        ids\n      }\n    }\n  }\n"]);return c=function(){return e},e}function o(){var e=Object(a.a)(["\n  mutation ApproveTransactions($transaction_ids: [Int!]!) {\n    response: approve_transactions(transaction_ids: $transaction_ids) {\n      __typename\n      ... on Response {\n        status\n        code\n        message\n        errors\n      }\n      ... on StatusResponse {\n        status\n        code\n        message\n        ids\n      }\n    }\n  }\n"]);return o=function(){return e},e}function s(){var e=Object(a.a)(["\n  mutation DeletePendingTransactions($transaction_ids: [Int!]!) {\n    response: delete_pending_transactions(transaction_ids: $transaction_ids) {\n      __typename\n      ... on Response {\n        status\n        code\n        message\n        errors\n      }\n      ... on StatusResponse {\n        status\n        code\n        message\n        ids\n      }\n    }\n  }\n"]);return s=function(){return e},e}function i(){var e=Object(a.a)(["\n  mutation DebitCustomerAccount(\n    $account_number: String!\n    $collector_id: String!\n    $branch_code: String!\n    $amount: String!\n    $amount_in_words: String!\n    $transaction_date: String!\n    $process_duplicate: String!\n  ) {\n    response: debit_customer_account(\n      account_number: $account_number\n      collector_id: $collector_id\n      branch_code: $branch_code\n      amount: $amount\n      amount_in_words: $amount_in_words\n      transaction_date: $transaction_date\n      process_duplicate: $process_duplicate\n    ) {\n      __typename\n      ... on Response {\n        status\n        code\n        message\n        errors\n      }\n    }\n  }\n"]);return i=function(){return e},e}function u(){var e=Object(a.a)(["\n  mutation CreditCustomerAccount(\n    $account_number: String!\n    $collector_id: String!\n    $branch_code: String!\n    $amount: String!\n    $amount_in_words: String!\n    $transaction_date: String!\n    $process_duplicate: String!\n  ) {\n    response: credit_customer_account(\n      account_number: $account_number\n      collector_id: $collector_id\n      branch_code: $branch_code\n      amount: $amount\n      amount_in_words: $amount_in_words\n      transaction_date: $transaction_date\n      process_duplicate: $process_duplicate\n    ) {\n      __typename\n      ... on Response {\n        status\n        code\n        message\n        errors\n      }\n    }\n  }\n"]);return u=function(){return e},e}var l=Object(r.gql)(u()),m=Object(r.gql)(i()),d=Object(r.gql)(s()),_=Object(r.gql)(o()),b=Object(r.gql)(c())},515:function(e,n,t){"use strict";var a=t(13),r=t(33),c=t(0),o=t.n(c),s=t(14),i=t(21),u=t(407),l=t(408),m=t(416),d=t(513),_=t(598),b=t(599),f=t(321),p=t(687),g=t(506),v=t(44),h=t(604),E=t(549),O=t(185),j=t(74),y=t(452);n.a=function(e){var n=e.setAccountNumber,t=e.onSetCustomer,A=void 0===t?function(e){return e}:t,N=e.reset,S=e.fetchPageStatus,$=void 0!==S&&S,C=Object(c.useState)(!1),w=Object(r.a)(C,2),x=w[0],P=w[1],I=Object(c.useState)([]),q=Object(r.a)(I,2),T=q[0],k=q[1],F=Object(c.useState)({}),B=Object(r.a)(F,2),D=B[0],M=B[1],L=Object(c.useState)(""),R=Object(r.a)(L,2),G=R[0],V=R[1],U=Object(s.c)(),K=Object(g.a)((function(e){e&&(V(e),P(!0))}),600),W=Object(c.useCallback)((function(e){if(e){e.persist();var n=e.currentTarget.value;K.callback(n)}}),[K]),z=$?y.f:y.e,Q=Object(i.useLazyQuery)(z,{errorPolicy:"all",fetchPolicy:"no-cache",onCompleted:function(e){e&&(e.response.data?k(e.response.data.map((function(e){return Object.assign(e,{value:e.account_number,text:"".concat(e.name," (").concat(e.account_number,")")})}))):Object(v.a)(e.response,U))}}),H=Object(r.a)(Q,2),Y=H[0],J=H[1].loading;return o.a.useEffect((function(){G&&Y({variables:{page:1,search:"%".concat(G,"%")}})}),[G]),o.a.useEffect((function(){x||k([])}),[x]),o.a.useEffect((function(){N&&(k([]),M({}),n(""))}),[N]),o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{variant:"elevation",className:"card-box"},o.a.createElement("div",{className:"card-header"},o.a.createElement("div",{className:"card-header--title text-center d-block"},o.a.createElement("small",null,"CUSTOMERS"),o.a.createElement("b",null,"Search Customers"))),o.a.createElement(l.a,null,o.a.createElement("div",{className:"py-2 d-flex align-items-center justify-content-center"},o.a.createElement(p.a,{options:T,noOptionsText:"No results found",openOnFocus:!1,freeSolo:!1,clearOnBlur:!1,includeInputInList:!0,filterSelectedOptions:!0,loading:J,name:"autocomplete",style:{width:"100%"},onInputChange:W,filterOptions:function(e){return e},onChange:function(e,t){t&&t.account_number&&(M(t),A(t),n(t.account_number))},getOptionLabel:function(e){return"string"===typeof e?e:e.text},renderInput:function(e){return o.a.createElement(m.a,Object.assign({},e,{onFocus:function(){P(!0)},label:"Search",variant:"outlined",placeholder:"Search",InputProps:Object(a.a)(Object(a.a)({},e.InputProps),{},{startAdornment:o.a.createElement(h.a,null),endAdornment:o.a.createElement(o.a.Fragment,null,J?o.a.createElement(d.a,{color:"primary",size:20}):null,e.InputProps.endAdornment)})}))},renderOption:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.a,null,o.a.createElement(E.a,null)),o.a.createElement(b.a,null,e.name,o.a.createElement("br",null),o.a.createElement("span",{className:"text-black-50"},e.account_number)))}})))),D&&D.name&&o.a.createElement(u.a,{variant:"elevation",className:"card-box mt20 "},o.a.createElement("div",{className:"color-swatch"},o.a.createElement("div",{className:"color-swatch--bg h-auto bg-composed-wrapper bg-brand-slack"},o.a.createElement("div",{className:"bg-composed-wrapper--image bg-composed-img-3"}),o.a.createElement("div",{className:"bg-composed-wrapper--content text-light p-5"},o.a.createElement("h5",{className:"mb-1"},"Customer Profile"),o.a.createElement("p",{className:"mb-2 opacity-7"},D.name)))),o.a.createElement(l.a,{className:"text-center card-body-avatar"},o.a.createElement("a",{href:"#/",onClick:function(e){return e.preventDefault()},className:"avatar-icon-wrapper shadow-lg rounded-circle card-box-hover-rise d-130"},o.a.createElement("div",{className:"avatar-icon rounded-circle"},o.a.createElement("img",{alt:"...",className:"img-fluid",src:D.photo_thumbnail_url}))),o.a.createElement(O.a,{title:"Personal Details",extraClasses:"ml20 mr20 mt40"}),o.a.createElement(f.a,{container:!0,spacing:3,className:"pr20 pl20 mt10 mb20"},o.a.createElement(f.a,{item:!0,sm:12},o.a.createElement(j.a,{title:"Account Number",content:D.account_number})," "),o.a.createElement(f.a,{item:!0,sm:12},o.a.createElement(j.a,{title:"Name",content:"".concat(D.title," ").concat(D.name)})," "),o.a.createElement(f.a,{item:!0,sm:6},o.a.createElement(j.a,{title:"Phone Number",content:D.phone_number})," "),o.a.createElement(f.a,{item:!0,sm:6},o.a.createElement(j.a,{title:"Daily Contribution",content:"\u20a6"+parseInt(D.daily_contribution_amount).toLocaleString()})," "),o.a.createElement(f.a,{item:!0,sm:6},o.a.createElement(j.a,{title:"Main Balance",content:"\u20a6"+parseFloat(D.main_balance).toLocaleString()})," "),o.a.createElement(f.a,{item:!0,sm:6},o.a.createElement(j.a,{title:"Branch",content:D.branch.branch_name||"-N/A-"})," "),o.a.createElement(f.a,{item:!0,sm:12},o.a.createElement(j.a,{title:"Account Officer",content:D.account_officer_info.name||"-N/A-"})," ")))))}},701:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return M}));var a=t(33),r=t(0),c=t.n(r),o=t(321),s=t(183),i=t(180),u=t(17),l=t(14),m=t(81),d=t(395),_=t(161),b=t.n(_),f=t(178),p=t(420),g=t(426),v=t(521),h=t(679),E=t(407),O=t(408),j=t(522),y=t(247),A=t(423),N=t(424),S=t(21),$=t(421),C=t(96),w=t(44),x=t(45),P=t(181),I=t(428),q=t(445),T=t(450),k=t(492),F=t(431),B=function(e){var n=e.accountNumber,t=void 0===n?"":n,r=e.onReset,s=Object(l.c)(),i=c.a.useState([{text:"",value:""}]),u=Object(a.a)(i,2),_=u[0],B=u[1],D=c.a.useState([{text:"",value:""}]),M=Object(a.a)(D,2),L=M[0],R=M[1],G=Object(l.d)((function(e){return e.profile.branch})),V=Object(S.useMutation)(k.c,{errorPolicy:"all",fetchPolicy:"no-cache"}),U=Object(a.a)(V,1)[0],K=Object(S.useQuery)(F.d,{errorPolicy:"all",fetchPolicy:"no-cache",onCompleted:function(e){e&&function(e){if(e)if(e.staffs&&e.branches.data){var n=e.branches.data.map((function(e){return{value:e.branch_code,text:e.branch_name}}));B(n);var t=e.staffs.data.map((function(e){return{value:e.staff_id,text:e.name}}));R(t)}else Object(w.a)(e.response,s)}(e)}}).loading,W=Object(P.b)().getConfirmation,z={account_number:t,collector_id:{text:"",value:""},branch_code:{value:G.branch_code,text:G.branch_name},amount:"",amount_in_words:"",transaction_date:new Date},Q=A.b().shape({collector_id:N.a("Please select a collector"),branch_code:N.a("Please select a branch"),amount:N.d(),amount_in_words:N.i(!0,1,200),transaction_date:N.i(!0,1,100)}),H=function(){var e=Object(f.a)(b.a.mark((function e(n,a){var c,o,i,u,l,d,_,f=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=f.length>2&&void 0!==f[2]&&f[2],o=a.setSubmitting,i=a.resetForm,""!==t){e.next=5;break}return s(Object(x.a)("Please select a customer record from the search customer panel!","error")),e.abrupt("return");case 5:if(e.t0=c,e.t0){e.next=10;break}return e.next=9,W({title:"Attention!",type:"warning",okText:"Proceed",cancelText:"Cancel",message:"Are you sure you would like to debit this customer?"});case 9:e.t0=e.sent;case 10:if(u=e.t0,l={account_number:t,collector_id:n.collector_id.value,branch_code:n.branch_code.value,amount:n.amount,amount_in_words:n.amount_in_words,transaction_date:m.a.getGenericDateFromDate(n.transaction_date),process_duplicate:c?"Yes":"No"},!u){e.next=36;break}return e.next=15,U({variables:l});case 15:if(!(d=e.sent).data){e.next=36;break}if("success"!==(_=d.data).response.status){e.next=26;break}s(Object(x.a)(_.response.message,"success")),i(),o(!1),r(!0),setTimeout((function(){r(!1)}),1e3),e.next=36;break;case 26:if("duplicate"!==_.response.status){e.next=35;break}return e.next=29,W({title:"Attention!",type:"warning",okText:"Go Ahead",cancelText:"Cancel",message:"This transaction has already been made for the selected date and Account Number. Do you want to debit this customer twice?"});case 29:if(!e.sent){e.next=33;break}return e.next=33,H(n,a,!0);case 33:e.next=36;break;case 35:Object(w.a)(_.response,s);case 36:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(p.c,{initialValues:z,onSubmit:H,validateOnChange:!0,validateOnBlur:!0,validationSchema:Q},(function(e){var n=e.isSubmitting,t=(e.values,e.setFieldValue);return c.a.createElement(p.b,{className:"",autoComplete:"false"},c.a.createElement(E.a,{variant:"elevation",className:"card-box"},c.a.createElement("div",{className:"card-header"},c.a.createElement("div",{className:"card-header--title d-block"},c.a.createElement(d.a,null)," Debit Customer Account")),c.a.createElement(O.a,null,c.a.createElement($.a,{title:"Information!",type:"info",className:"mln mrn"},"Please fill in the form below to debit a customer's account. All fields marked (*) are compulsory."),c.a.createElement(o.a,{container:!0,spacing:3,className:"prn pln mtn"},c.a.createElement(o.a,{item:!0,md:6},c.a.createElement(g.a,{id:"amount",name:"amount",label:"Amount *",placeholder:"Amount",icon:c.a.createElement(v.a,null),onInput:function(e){if(e)if(e.target.value){var n=m.a.getWordsFromFloatNumber(e.target.value);t("amount_in_words",n,!0)}else t("amount_in_words","",!0)}})),c.a.createElement(o.a,{item:!0,md:6},c.a.createElement(T.a,{name:"amount_in_words",label:"Amount In Words *",placeholder:"Amount In Words",icon:c.a.createElement(h.a,null)})),c.a.createElement(o.a,{item:!0,md:6},c.a.createElement(I.a,{name:"collector_id",label:"Select Collector *",loading:K,data:L})),c.a.createElement(o.a,{item:!0,md:6},c.a.createElement(I.a,{name:"branch_code",label:"Select Branch *",loading:K,data:_})),c.a.createElement(o.a,{item:!0,md:12},c.a.createElement(q.a,{name:"transaction_date",label:"Transaction Date *",placeholder:"Transaction Date",readOnly:!0})," ")),c.a.createElement("div",{className:"mb30"})),c.a.createElement("div",{className:"divider"}),c.a.createElement(j.a,{className:"p20 d-flex align-items-left justify-content-left"},c.a.createElement(y.a,{disabled:n,type:"submit",className:"btn-danger font-weight-bold"},n?c.a.createElement("div",{className:"pt5"},c.a.createElement(C.BeatLoader,{color:"var(--second)",loading:!0})):c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,null)," \xa0 Debit Account")))))})))},D=t(515);function M(){var e=Object(r.useState)(""),n=Object(a.a)(e,2),t=n[0],_=n[1],b=Object(r.useState)(!1),f=Object(a.a)(b,2),p=f[0],g=f[1],v=Object(u.g)(),h=Object(l.d)((function(e){return e.profile}));return Object(r.useEffect)((function(){m.a.enforcePermissions(h,v,"debit-customer")}),[h,v]),c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,{title:"Debit Customer Account"}),c.a.createElement(s.a,{titleHeading:"Debit Customer Account",titleDescription:"This page is used to debit customer account.",breadCrumbTitle:"Transactions",breadCrumbSubTitle:"Debit Customer Account",Icon:d.a}),c.a.createElement(o.a,{container:!0,spacing:6},c.a.createElement(o.a,{item:!0,md:4},c.a.createElement(D.a,{setAccountNumber:_,reset:p})),c.a.createElement(o.a,{item:!0,md:8,className:""},c.a.createElement(B,{accountNumber:t,onReset:g,reset:p}))))}}}]);