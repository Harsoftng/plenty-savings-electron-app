(this["webpackJsonpPlentySavings-admin-app"]=this["webpackJsonpPlentySavings-admin-app"]||[]).push([[30],{424:function(e,a,t){"use strict";t.d(a,"b",(function(){return r})),t.d(a,"i",(function(){return l})),t.d(a,"a",(function(){return c})),t.d(a,"h",(function(){return o})),t.d(a,"c",(function(){return s})),t.d(a,"d",(function(){return i})),t.d(a,"g",(function(){return d})),t.d(a,"e",(function(){return m})),t.d(a,"f",(function(){return u}));var n=t(423),r=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=n.d().email("Invalid email address!").min(a,"Email addresses must be 10 characters or more!").max(t,"Email addresses must be 255 characters or less!");return e&&(r=r.required("A valid email is required!")),r},l=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=n.d().min(a,"Value must be "+a+" characters or more!").max(t,"Value must be "+t+" characters or less!");return e&&(r=r.required("A value is required!")),r},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Please select a value!";return n.b().shape({value:n.d().required(e),text:n.d().required(e)})},o=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=n.d();return e&&(a=a.required("Please select a value!")),a},s=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=n.a().typeError("A valid number is required!");return e&&(a=a.required("A valid number is required!")),a},i=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=/^[0-9]\d*(((,\d{3}){1})*(\.\d{0,2})?)$/,t=n.d().matches(a,"A valid amount is required!");return e&&(t=t.required("A valid amount is required!")),t},d=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,t=n.d().matches(a,"Phone number is not valid");return e&&(t=t.required("A valid phone number is required!")),t},m=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,l=n.d().min(t,"Passwords must be 6 characters or more!").max(r,"Passwords must be 50 characters or less!");return e&&(l=l.matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,}$/,"Passwords must contain at least 6 characters consisting of at least one uppercase, one lowercase, one number and one special case character")),a&&(l=l.required("A valid password is required")),l},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"password",a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=n.d().oneOf([n.c(e),null],"Passwords must match");return a&&(t=t.required("Please confirm your password!")),t}},426:function(e,a,t){"use strict";var n=t(33),r=t(177),l=t(0),c=t.n(l),o=t(420),s=t(507),i=t(416),d=t(519),m=t(506);a.a=function(e){var a=e.label,t=e.readOnly,u=Object(r.a)(e,["label","readOnly"]),p=Object(o.d)(u),b=Object(n.a)(p,2),h=b[0],v=b[1],f=Object(l.useState)(h.value),g=Object(n.a)(f,2),E=g[0],O=g[1],j=Object(m.a)((function(e){h.onChange&&h.onChange(e)}),200);Object(l.useEffect)((function(){""===h.value?O(""):O(h.value)}),[h.value]);var w=Object(l.useCallback)((function(e){e.persist();var a=e.currentTarget.value;O(a),j.callback(e)}),[j]),k={};return u.icon&&(k={startAdornment:c.a.createElement(s.a,{position:"start"},u.icon?u.icon:c.a.createElement(d.a,null)),readOnly:t}),c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,Object.assign({fullWidth:!0,variant:"outlined",label:a,value:E,onChange:w,onBlur:h.onBlur},u,{InputProps:k})),v.touched&&v.error?c.a.createElement("div",{className:"oak-input-error"},v.error):null)}},481:function(e,a,t){"use strict";var n=t(13),r=t(33),l=t(177),c=t(0),o=t.n(c),s=t(420),i=t(507),d=t(252),m=t(416),u=t(9),p=Object(u.a)(o.a.createElement(o.a.Fragment,null,o.a.createElement("g",{fill:"none"},o.a.createElement("path",{d:"M0 0h24v24H0V0z"}),o.a.createElement("path",{d:"M0 0h24v24H0V0z",opacity:".87"})),o.a.createElement("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})),"LockOutlined"),b=Object(u.a)(o.a.createElement("path",{d:"M12 4C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"VisibilityRounded"),h=Object(u.a)(o.a.createElement("path",{d:"M12 6.5c2.76 0 5 2.24 5 5 0 .51-.1 1-.24 1.46l3.06 3.06c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l2.17 2.17c.47-.14.96-.24 1.47-.24zM2.71 3.16c-.39.39-.39 1.02 0 1.41l1.97 1.97C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.97-.3 4.31-.82l2.72 2.72c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L4.13 3.16c-.39-.39-1.03-.39-1.42 0zM12 16.5c-2.76 0-5-2.24-5-5 0-.77.18-1.5.49-2.14l1.57 1.57c-.03.18-.06.37-.06.57 0 1.66 1.34 3 3 3 .2 0 .38-.03.57-.07L14.14 16c-.65.32-1.37.5-2.14.5zm2.97-5.33c-.15-1.4-1.25-2.49-2.64-2.64l2.64 2.64z"}),"VisibilityOffRounded"),v=t(506);a.a=function(e){var a=e.label,t=Object(l.a)(e,["label"]),u=Object(s.d)(t),f=Object(r.a)(u,2),g=f[0],E=f[1],O=Object(c.useState)(g.value),j=Object(r.a)(O,2),w=j[0],k=j[1],y=Object(c.useState)({password:"",showPassword:!1}),x=Object(r.a)(y,2),S=x[0],P=x[1],C=function(){P(Object(n.a)(Object(n.a)({},S),{},{showPassword:!S.showPassword}))},z=function(e){e.preventDefault()},N=Object(v.a)((function(e){g.onChange&&g.onChange(e)}),200);Object(c.useEffect)((function(){""===g.value&&k("")}),[g.value]);var _=Object(c.useCallback)((function(e){e.persist();var a=e.currentTarget.value;k(a),N.callback(e)}),[N]),q={};return q=t.icon?{startAdornment:o.a.createElement(i.a,{position:"start"},o.a.createElement(p,null)),endAdornment:o.a.createElement(i.a,{position:"end"},o.a.createElement(d.a,{"aria-label":"Toggle password visibility",onClick:C,onMouseDown:z},S.showPassword?o.a.createElement(b,null):o.a.createElement(h,null)))}:{endAdornment:o.a.createElement(i.a,{position:"end"},o.a.createElement(d.a,{"aria-label":"Toggle password visibility",onClick:C,onMouseDown:z},S.showPassword?o.a.createElement(b,null):o.a.createElement(h,null)))},o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,Object.assign({fullWidth:!0,variant:"outlined",label:a,value:w,onChange:_,onBlur:g.onBlur},t,{type:S.showPassword?"text":"password",InputProps:q})),E.touched&&E.error?o.a.createElement("div",{className:"oak-input-error"},E.error):null)}},519:function(e,a,t){"use strict";var n=t(0),r=t.n(n),l=t(9);a.a=Object(l.a)(r.a.createElement("path",{d:"M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z"}),"AccountBox")},520:function(e,a,t){"use strict";var n=t(1),r=t(6),l=t(0),c=(t(5),t(3)),o=t(62),s=t(7),i=t(174),d=t(12),m=l.forwardRef((function(e,a){e.checked;var t=e.classes,s=e.className,m=e.control,u=e.disabled,p=(e.inputRef,e.label),b=e.labelPlacement,h=void 0===b?"end":b,v=(e.name,e.onChange,e.value,Object(r.a)(e,["checked","classes","className","control","disabled","inputRef","label","labelPlacement","name","onChange","value"])),f=Object(o.a)(),g=u;"undefined"===typeof g&&"undefined"!==typeof m.props.disabled&&(g=m.props.disabled),"undefined"===typeof g&&f&&(g=f.disabled);var E={disabled:g};return["checked","name","onChange","value","inputRef"].forEach((function(a){"undefined"===typeof m.props[a]&&"undefined"!==typeof e[a]&&(E[a]=e[a])})),l.createElement("label",Object(n.a)({className:Object(c.a)(t.root,s,"end"!==h&&t["labelPlacement".concat(Object(d.a)(h))],g&&t.disabled),ref:a},v),l.cloneElement(m,E),l.createElement(i.a,{component:"span",className:Object(c.a)(t.label,g&&t.disabled)},p))}));a.a=Object(s.a)((function(e){return{root:{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,"&$disabled":{cursor:"default"}},labelPlacementStart:{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},labelPlacementTop:{flexDirection:"column-reverse",marginLeft:16},labelPlacementBottom:{flexDirection:"column",marginLeft:16},disabled:{},label:{"&$disabled":{color:e.palette.text.disabled}}}}),{name:"MuiFormControlLabel"})(m)},548:function(e,a,t){e.exports=t.p+"static/media/favicon.da296ba6.png"},596:function(e,a,t){"use strict";var n=t(0),r=t.n(n),l=t(9);a.a=Object(l.a)(r.a.createElement("path",{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6zm-2 0l-8 4.99L4 6h16zm0 12H4V8l8 5 8-5v10z"}),"MailOutlined")},612:function(e,a,t){"use strict";var n=t(1),r=t(6),l=t(0),c=(t(5),t(3)),o=t(189),s=t(87),i=Object(s.a)(l.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),d=Object(s.a)(l.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),m=t(31),u=Object(s.a)(l.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),p=t(12),b=t(7),h=l.createElement(d,null),v=l.createElement(i,null),f=l.createElement(u,null),g=l.forwardRef((function(e,a){var t=e.checkedIcon,s=void 0===t?h:t,i=e.classes,d=e.color,m=void 0===d?"secondary":d,u=e.icon,b=void 0===u?v:u,g=e.indeterminate,E=void 0!==g&&g,O=e.indeterminateIcon,j=void 0===O?f:O,w=e.inputProps,k=e.size,y=void 0===k?"medium":k,x=Object(r.a)(e,["checkedIcon","classes","color","icon","indeterminate","indeterminateIcon","inputProps","size"]);return l.createElement(o.a,Object(n.a)({type:"checkbox",classes:{root:Object(c.a)(i.root,i["color".concat(Object(p.a)(m))],E&&i.indeterminate),checked:i.checked,disabled:i.disabled},color:m,inputProps:Object(n.a)({"data-indeterminate":E},w),icon:l.cloneElement(E?j:b,{fontSize:"small"===y?"small":"default"}),checkedIcon:l.cloneElement(E?j:s,{fontSize:"small"===y?"small":"default"}),ref:a},x))}));a.a=Object(b.a)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},indeterminate:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(m.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(m.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiCheckbox"})(g)},694:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return F}));var n=t(161),r=t.n(n),l=t(178),c=t(33),o=t(0),s=t.n(o),i=t(321),d=t(407),m=t(247),u=t(548),p=t.n(u),b=t(246),h=t(3),v=t(17),f=t(11),g=t(196),E=t(426),O=t(420),j=t(423),w=t(424),k=t(481),y=t(596),x=t(384),S=t(197),P=t(177),C=t(520),z=t(612),N=function(e){var a=e.label,t=e.color,n=e.value,r=Object(P.a)(e,["label","color","value"]),l=Object(O.d)(r),o=Object(c.a)(l,2),i=(o[0],o[1]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(C.a,{control:s.a.createElement(O.a,Object.assign({type:"checkbox",value:n||"Yes",color:t||"primary",as:z.a},r)),label:a}),i.touched&&i.error?s.a.createElement("div",{className:"oak-input-error"},i.error):null)},_=t(180),q=t(14),L=t(128),M=t(96),V=t(44),A=t(130),H=t(125),B=t(24),I=t(81),R=t(131),$=Object(b.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},small:{width:e.spacing(3),height:e.spacing(3)},large:{width:e.spacing(10),height:e.spacing(10)},illustrationHeight:{height:300}}})),D={code:500,open:!0,message:"Login failed due to incomplete profile data from the server. Please try again!",title:"",type:"error",messages:[]};function F(e){var a=e.location,t=e.history,n=(a.state||{from:"/dashboard"}).from;n.pathname&&(n="/logout"===n.pathname||"/logout/all-devices"===n.pathname?"/dashboard":n);var u=$(),b=Object(q.c)(),P=Object(o.useState)(!1),C=Object(c.a)(P,2),z=C[0],F=C[1],T="undefined"===localStorage.shop_name||null===localStorage.shop_name?"":localStorage.shop_name,W="undefined"===localStorage.shop_logo||null===localStorage.shop_logo?"":localStorage.shop_logo,J="undefined"===localStorage.shop_code||null===localStorage.shop_code?"":localStorage.shop_code,Y=Object(o.useState)(T),Z=Object(c.a)(Y,2),G=Z[0],K=(Z[1],Object(o.useState)(W)),Q=Object(c.a)(K,2),U=Q[0],X=(Q[1],Object(o.useState)(J)),ee=Object(c.a)(X,2),ae=ee[0],te=(ee[1],Object(q.d)((function(e){return e.token}))),ne=Object(q.d)((function(e){return e.profile}));if(""!==te&&te.length>50&&ne.logged_in&&""!==ne.email&&""!==ne.last_name&&""!==ne.name&&""!==ne.first_name){if(localStorage["user-last-seen"])return n?s.a.createElement(v.a,{to:n}):s.a.createElement(v.a,{to:"/dashboard"});localStorage.clear()}var re={email:"",password:"",shop_code:ae||"",remember_me:""},le=j.b({email:w.b(),password:w.e(!1),shop_code:w.c(!0)}),ce=function(){var e=Object(l.a)(r.a.mark((function e(a,l){var c,o,s,i,d,m,u,p,h,v;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=l.setSubmitting,o=I.a.getApolloClient(a.shop_code,b),e.next=4,o.query({query:L.b,variables:{email:a.email,password:a.password}});case 4:if(s=e.sent,c(!1),F(!0),!s.data){e.next=42;break}if("success"!==(i=s.data).response.status){e.next=40;break}if(F(!1),i.response.token){e.next=14;break}return Object(V.a)(D,b),e.abrupt("return");case 14:if(i.response.profile){e.next=17;break}return Object(V.a)(D,b),e.abrupt("return");case 17:if(i.response.profile.theme){e.next=20;break}return Object(V.a)(D,b),e.abrupt("return");case 20:if(i.response.profile.settings){e.next=23;break}return Object(V.a)(D,b),e.abrupt("return");case 23:if(i.response.shop_code){e.next=26;break}return Object(V.a)(D,b),e.abrupt("return");case 26:b(A.a.actions.setToken(i.response.token)),b(H.a.actions.setProfile(i.response.profile)),b(R.a.actions.setShopCode(i.response.shop_code)),b(H.a.actions.setLoggedIn(!0)),b(Object(B.x)(i.response.profile.theme)),b(Object(B.x)(i.response.profile.theme)),F(!1),localStorage["user-last-seen"]=Date.now(),localStorage.shop_code=null===(d=i.response)||void 0===d?void 0:d.shop_code,localStorage.shop_name=null===(m=i.response)||void 0===m||null===(u=m.profile)||void 0===u||null===(p=u.settings)||void 0===p?void 0:p.shop_name,localStorage.shop_logo=null===(h=i.response.profile)||void 0===h||null===(v=h.settings)||void 0===v?void 0:v.logo_thumbnail_url,n&&t.push(n),e.next=42;break;case 40:Object(V.a)(i.response,b),F(!1);case 42:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement(_.a,{title:"Login"}),s.a.createElement("div",{className:"app-wrapper min-vh-100 bg-white"},s.a.createElement("div",{className:"app-main min-vh-100"},s.a.createElement("div",{className:"app-content p-0"},s.a.createElement("div",{className:"app-inner-content-layout--main"},s.a.createElement("div",{className:"flex-grow-1 w-100 d-flex align-items-center"},s.a.createElement("div",{className:"bg-composed-wrapper--content"},s.a.createElement(i.a,{container:!0,spacing:0,className:"min-vh-100"},s.a.createElement(i.a,{item:!0,lg:7,xl:6,className:"d-flex align-items-center"},s.a.createElement(i.a,{item:!0,md:10,lg:8,xl:7,className:"mx-auto"},s.a.createElement(O.c,{initialValues:re,onSubmit:ce,validationSchema:le},(function(e){var a=e.isSubmitting;return s.a.createElement(d.a,{className:"p10 m20"},s.a.createElement(O.b,{autoComplete:"no"},s.a.createElement("div",{className:"pr20 pl20"},s.a.createElement("div",{className:"text-center"},s.a.createElement("img",{title:"PlentySavings Logo",src:U||p.a,className:Object(h.a)(u.large,"mb20"),alt:"PlentySavings Logo"}),s.a.createElement("h1",{className:"display-4 mb-4 font-weight-bold"},G||"PlentySavings.shop")),s.a.createElement("div",null,s.a.createElement("div",{className:"mb-4"},s.a.createElement(E.a,{id:"email",name:"email",label:"Email address",placeholder:"Email address",icon:s.a.createElement(y.a,null)})),s.a.createElement("div",{className:"mb-4"},s.a.createElement(k.a,{id:"password",name:"password",label:"Password",placeholder:"Password",icon:"true"})),s.a.createElement("div",{className:"mb-3"},s.a.createElement(E.a,{id:"shop_code",name:"shop_code",label:"Shop Code",placeholder:"Shop Code",maxLength:"10",icon:s.a.createElement(x.a,null)})),s.a.createElement("div",{className:"d-flex justify-content-between align-items-center font-size-md"},s.a.createElement(N,{checked:!0,value:"Yes",color:"primary",label:"Remember me",name:"remember_me",id:"remember_me"}),s.a.createElement("div",null,s.a.createElement(f.b,{to:"/password/recover",className:"text-first"},"Recover password"))),s.a.createElement("div",{className:"text-center py-4"},s.a.createElement(m.a,{disabled:a||z,type:"submit",className:"btn-second font-weight-bold w-50 my-2"},a||z?s.a.createElement("div",{className:"pt5"},s.a.createElement(M.BeatLoader,{color:"var(--second)",loading:!0})):s.a.createElement(s.a.Fragment,null,"Sign in"))),s.a.createElement("div",{className:"pb-4 d-flex align-items-center justify-content-center"},s.a.createElement(S.a,{color:"dark"}))))))})))),s.a.createElement(g.a,null)))))))))}}}]);